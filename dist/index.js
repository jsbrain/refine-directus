var m=Object.defineProperty,F=Object.defineProperties,M=Object.getOwnPropertyDescriptor,T=Object.getOwnPropertyDescriptors,S=Object.getOwnPropertyNames,b=Object.getOwnPropertySymbols;var O=Object.prototype.hasOwnProperty,$=Object.prototype.propertyIsEnumerable;var v=(s,e,r)=>e in s?m(s,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[e]=r,l=(s,e)=>{for(var r in e||(e={}))O.call(e,r)&&v(s,r,e[r]);if(b)for(var r of b(e))$.call(e,r)&&v(s,r,e[r]);return s},k=(s,e)=>F(s,T(e));var j=(s,e)=>{for(var r in e)m(s,r,{get:e[r],enumerable:!0})},f=(s,e,r,o)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of S(e))!O.call(s,n)&&n!==r&&m(s,n,{get:()=>e[n],enumerable:!(o=M(e,n))||o.enumerable});return s},u=(s,e,r)=>(f(s,e,"default"),r&&f(r,e,"default"));var P=s=>f(m({},"__esModule",{value:!0}),s);var d={};j(d,{AuthHelper:()=>B,dataProvider:()=>A});module.exports=P(d);var E={eq:"_eq",ne:"_neq",lt:"_lt",gt:"_gt",lte:"_lte",gte:"_gte",in:"_in",nin:"_nin",contains:"_contains",containss:void 0,ncontains:"_ncontains",ncontainss:void 0,null:"_null",nnull:"_nnull",between:"_between",nbetween:"_nbetween"},x=(s,e)=>{var r,o={},n=s.split("."),a=o;for(r=0;r<n.length-1;r++)a=a[n[r]]={};return a[n[r]]=e,o},q=s=>{let e=[];return s&&s.map(r=>{r.order&&(r.order==="desc"?e.push(`-${r.field}`):e.push(`${r.field}`))}),e},z=s=>{let e={},r="";return s&&(e._and=[],s.map(o=>{if(o.operator!=="or"){let{field:n,operator:a,value:t}=o;if(t)if(n==="search")r=t;else{let c=E[a],i=`${n}.${c}`,p=x(i,t);e._and.push(p)}}else{let{value:n}=o,a={};a._or=[],n.map((t,c)=>{let{field:i,operator:p,value:w}=t,h=E[p],g=`${i}.${h}`,y=x(g,w);a._or.push(y)}),e._and.push(a)}})),{search:r,filters:e}},A=s=>({getList:async({resource:e,pagination:r,filters:o,sort:n,metaData:a})=>{let t=(r==null?void 0:r.current)||1,c=(r==null?void 0:r.pageSize)||50,i=q(n),p=z(o),w=n&&n.length>0?i.join(","):"-date_created",h=s.items(e),g=l({search:p.search,filter:l({},p.filters),meta:"*",page:t,limit:c,sort:w,fields:["*"]},a);try{let y=await h.readByQuery(g);return{data:y.data,total:y.meta.filter_count}}catch(y){throw console.log(y),new Error(y.errors&&y.errors[0]&&y.errors[0].message)}},getMany:async({resource:e,ids:r,metaData:o})=>{let n=s.items(e),a=l({filter:{id:{_in:r}},fields:["*"]},o);try{let t=await n.readByQuery(a);return{data:t.data,total:t.meta.filter_count}}catch(t){throw console.log(t),new Error(t.errors&&t.errors[0]&&t.errors[0].message)}},create:async({resource:e,variables:r,metaData:o})=>{let n=s.items(e),a=l(l({},r),o);try{return{data:await n.createOne(a)}}catch(t){throw console.log(t),new Error(t.errors&&t.errors[0]&&t.errors[0].message)}},update:async({resource:e,id:r,variables:o,metaData:n})=>{let a=s.items(e),t=l(l({},o),n);try{return{data:await a.updateOne(r,t)}}catch(c){throw console.log(c),new Error(c.errors&&c.errors[0]&&c.errors[0].message)}},updateMany:async({resource:e,ids:r,variables:o,metaData:n})=>{let a=s.items(e),t=l(l({},o),n);try{return{data:(await a.updateMany(r,t)).data}}catch(c){throw console.log(c),new Error(c.errors&&c.errors[0]&&c.errors[0].message)}},createMany:async({resource:e,variables:r,metaData:o})=>{let n=s.items(e),a=l(l({},r),o);try{return{data:(await n.createMany(a)).data}}catch(t){throw console.log(t),new Error(t.errors&&t.errors[0]&&t.errors[0].message)}},getOne:async({resource:e,id:r,metaData:o})=>{let n=s.items(e),a=l({},o);try{let t=await n.readOne(r,a);return Promise.resolve({data:t})}catch(t){throw console.log(t),new Error(t.errors&&t.errors[0]&&t.errors[0].message)}},deleteOne:async({resource:e,id:r,metaData:o})=>{let n=s.items(e);try{if(o&&o.deleteType==="archive"){let a=l({status:"archived"},o);return{data:await n.updateOne(r,a)}}else return{data:await n.deleteOne(r)}}catch(a){throw console.log(a),new Error(a.errors&&a.errors[0]&&a.errors[0].message)}},deleteMany:async({resource:e,ids:r,metaData:o})=>{let n=s.items(e);try{if(o&&o.deleteType==="archive"){let a=l({status:"archived"},o);return{data:await n.updateMany(r,a)}}else return{data:(await n.deleteMany(r)).data}}catch(a){throw console.log(a),new Error(a.errors&&a.errors[0]&&a.errors[0].message)}},getApiUrl:()=>s.url,custom:async({url:e,method:r,filters:o,sort:n,payload:a,query:t,headers:c})=>{let i=s.transport,p;switch(r){case"put":p=await i.put(e,a,{headers:c,params:t});break;case"post":p=await i.post(e,a,{headers:c,params:t});break;case"patch":p=await i.patch(e,a,{headers:c,params:t});break;case"delete":p=await i.delete(e,{headers:c,params:t});break;default:p=await i.get(e,{headers:c,params:t});break}return k(l({},p),{data:p.data})}});var B=s=>({login:async(e,r)=>await s.auth.login({email:e,password:r}),me:async e=>await s.users.me.read(e),setToken:async e=>{await s.auth.static(e)},getToken:()=>s.auth.token,logout:async()=>await s.auth.logout()});u(d,require("@directus/sdk"),module.exports);
//# sourceMappingURL=index.js.map