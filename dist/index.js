var m=Object.defineProperty,F=Object.defineProperties,x=Object.getOwnPropertyDescriptor,S=Object.getOwnPropertyDescriptors,$=Object.getOwnPropertyNames,b=Object.getOwnPropertySymbols;var v=Object.prototype.hasOwnProperty,j=Object.prototype.propertyIsEnumerable;var O=(a,e,t)=>e in a?m(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,p=(a,e)=>{for(var t in e||(e={}))v.call(e,t)&&O(a,t,e[t]);if(b)for(var t of b(e))j.call(e,t)&&O(a,t,e[t]);return a},k=(a,e)=>F(a,S(e));var P=(a,e)=>{for(var t in e)m(a,t,{get:e[t],enumerable:!0})},f=(a,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of $(e))!v.call(a,s)&&s!==t&&m(a,s,{get:()=>e[s],enumerable:!(n=x(e,s))||n.enumerable});return a},d=(a,e,t)=>(f(a,e,"default"),t&&f(t,e,"default"));var q=a=>f(m({},"__esModule",{value:!0}),a);var u={};P(u,{AuthHelper:()=>I,dataProvider:()=>A});module.exports=q(u);var T={eq:"_eq",ne:"_neq",lt:"_lt",gt:"_gt",lte:"_lte",gte:"_gte",in:"_in",nin:"_nin",contains:"_contains",containss:void 0,ncontains:"_ncontains",ncontainss:void 0,null:"_null",nnull:"_nnull",between:"_between",nbetween:"_nbetween"},M=(a,e)=>{var t,n={},s=a.split("."),r=n;for(t=0;t<s.length-1;t++)r=r[s[t]]={};return r[s[t]]=e,n},Q=a=>{let e=[];return a&&a.map(t=>{t.order&&(t.order==="desc"?e.push(`-${t.field}`):e.push(`${t.field}`))}),e},z=a=>{let e={},t="";return a&&(e._and=[],a.map(n=>{if(n.operator!=="or"){let{field:s,operator:r,value:o}=n;if(o)if(s==="search")t=o;else{let c=T[r],i=`${s}.${c}`,l=M(i,o);e._and.push(l)}}else{let{value:s}=n,r={};r._or=[],s.map((o,c)=>{let{field:i,operator:l,value:h}=o,g=T[l],w=`${i}.${g}`,y=M(w,h);r._or.push(y)}),e._and.push(r)}})),{search:t,filters:e}},A=a=>({getList:async({resource:e,pagination:t,filters:n,sort:s,metaData:r})=>{let o=(t==null?void 0:t.current)||1,c=(t==null?void 0:t.pageSize)||50,i=Q(s),l=z(n),h=s&&s.length>0?i.join(","):"-date_created",g=a.items(e),w=p({search:l.search,filter:p({},l.filters),meta:"*",page:o,limit:c,sort:h,fields:["*"]},r);try{let y=await g.readByQuery(w);return{data:y.data,total:y.meta.filter_count}}catch(y){throw console.log(y),y}},getMany:async({resource:e,ids:t,metaData:n})=>{var o;let s=a.items(e),r=p({},n);try{let c=await s.readMany(t,r);return{data:c.data,total:(o=c==null?void 0:c.meta)==null?void 0:o.filter_count}}catch(c){throw console.log(c),c}},create:async({resource:e,variables:t,metaData:n})=>{let s=a.items(e),r=p(p({},t),n);try{return{data:await s.createOne(r)}}catch(o){throw console.log(o),o}},update:async({resource:e,id:t,variables:n,metaData:s})=>{let r=a.items(e),o=p(p({},n),s);try{return{data:await r.updateOne(t,o)}}catch(c){throw console.log(c),c}},updateMany:async({resource:e,ids:t,variables:n,metaData:s})=>{let r=a.items(e),o=p(p({},n),s);try{return{data:(await r.updateMany(t,o)).data}}catch(c){throw console.log(c),c}},createMany:async({resource:e,variables:t,metaData:n})=>{let s=a.items(e);try{return{data:(await s.createMany(t)).data}}catch(r){throw console.log(r),r}},getOne:async({resource:e,id:t,metaData:n})=>{let s=a.items(e),r=p({},n);try{let o=await s.readOne(t,r);return Promise.resolve({data:o})}catch(o){throw console.log(o),o}},deleteOne:async({resource:e,id:t,metaData:n})=>{let s=a.items(e);try{if(n&&n.deleteType==="archive"){let r=p({status:"archived"},n);return{data:await s.updateOne(t,r)}}else{let r=await s.deleteOne(t);return console.log(r),{data:r}}}catch(r){throw console.log(r),r}},deleteMany:async({resource:e,ids:t,metaData:n})=>{let s=a.items(e);try{if(n&&n.deleteType==="archive"){let r=p({status:"archived"},n);return{data:await s.updateMany(t,r)}}else return{data:(await s.deleteMany(t)).data}}catch(r){throw console.log(r),r}},getApiUrl:()=>a.url,custom:async({url:e,method:t,filters:n,sort:s,payload:r,query:o,headers:c})=>{let i=a.transport,l;switch(t){case"put":l=await i.put(e,r,{headers:c,params:o});break;case"post":l=await i.post(e,r,{headers:c,params:o});break;case"patch":l=await i.patch(e,r,{headers:c,params:o});break;case"delete":l=await i.delete(e,{headers:c,params:o});break;default:l=await i.get(e,{headers:c,params:o});break}return k(p({},l),{data:l.data})}});var I=a=>({login:async(e,t)=>await a.auth.login({email:e,password:t}),me:async e=>await a.users.me.read(e),setToken:async e=>{await a.auth.static(e)},getToken:()=>a.auth.token,logout:async()=>await a.auth.logout()});d(u,require("@directus/sdk"),module.exports);
//# sourceMappingURL=index.js.map