var h=Object.defineProperty,M=Object.defineProperties,F=Object.getOwnPropertyDescriptor,T=Object.getOwnPropertyDescriptors,x=Object.getOwnPropertyNames,_=Object.getOwnPropertySymbols;var b=Object.prototype.hasOwnProperty,A=Object.prototype.propertyIsEnumerable;var v=(r,e,t)=>e in r?h(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,i=(r,e)=>{for(var t in e||(e={}))b.call(e,t)&&v(r,t,e[t]);if(_)for(var t of _(e))A.call(e,t)&&v(r,t,e[t]);return r},O=(r,e)=>M(r,T(e));var S=(r,e)=>{for(var t in e)h(r,t,{get:e[t],enumerable:!0})},w=(r,e,t,a)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of x(e))!b.call(r,o)&&o!==t&&h(r,o,{get:()=>e[o],enumerable:!(a=F(e,o))||a.enumerable});return r},p=(r,e,t)=>(w(r,e,"default"),t&&w(t,e,"default"));var $=r=>w(h({},"__esModule",{value:!0}),r);var y={};S(y,{authProvider:()=>D,dataProvider:()=>q});module.exports=$(y);var P={eq:"_eq",ne:"_neq",lt:"_lt",gt:"_gt",lte:"_lte",gte:"_gte",in:"_in",nin:"_nin",contains:"_contains",containss:void 0,ncontains:"_ncontains",ncontainss:void 0,null:"_null",nnull:"_nnull",between:"_between",nbetween:"_nbetween"},k=(r,e)=>{var t,a={},o=r.split("."),s=a;for(t=0;t<o.length-1;t++)s=s[o[t]]={};return s[o[t]]=e,a},I=r=>{let e=[];return r&&r.map(t=>{t.order&&(t.order==="desc"?e.push(`-${t.field}`):e.push(`${t.field}`))}),e},Q=r=>{let e={},t="";return r&&(e._and=[],r.map(a=>{if(a.operator!=="or"){let{field:o,operator:s,value:n}=a;if(n)if(o==="search")t=n;else{let c=P[s],u=`${o}.${c}`,l=k(u,n);e._and.push(l)}}else{let{value:o}=a,s={};s._or=[],o.map(n=>{let{field:c,operator:u,value:l}=n,m=P[u],f=`${c}.${m}`,g=k(f,l);s._or.push(g)}),e._and.push(s)}})),{search:t,filters:e}},q=r=>({getList:async({resource:e,pagination:t,filters:a,sort:o,metaData:s})=>{let n=(t==null?void 0:t.current)||1,c=(t==null?void 0:t.pageSize)||50,u=I(o),l=Q(a),m=o&&o.length>0?u.join(","):"-date_created",f=r.items(e),g=i({search:l.search,filter:i({},l.filters),meta:"*",page:n,limit:c,sort:m,fields:["*"]},s);try{let d=await f.readByQuery(g);return{data:d.data,total:d.meta.filter_count}}catch(d){throw console.log(d),d}},getMany:async({resource:e,ids:t,metaData:a})=>{var n;let o=r.items(e),s=i({},a);try{let c=await o.readMany(t,s);return{data:c.data,total:(n=c==null?void 0:c.meta)==null?void 0:n.filter_count}}catch(c){throw console.log(c),c}},create:async({resource:e,variables:t,metaData:a})=>{let o=r.items(e),s=i(i({},t),a);try{return{data:await o.createOne(s)}}catch(n){throw console.log(n),n}},update:async({resource:e,id:t,variables:a,metaData:o})=>{let s=r.items(e),n=i(i({},a),o);try{return{data:await s.updateOne(t,n)}}catch(c){throw console.log(c),c}},updateMany:async({resource:e,ids:t,variables:a,metaData:o})=>{let s=r.items(e),n=i(i({},a),o);try{return{data:(await s.updateMany(t,n)).data}}catch(c){throw console.log(c),c}},createMany:async({resource:e,variables:t,metaData:a})=>{let o=r.items(e);try{return{data:(await o.createMany(t)).data}}catch(s){throw console.log(s),s}},getOne:async({resource:e,id:t,metaData:a})=>{let o=r.items(e),s=i({},a);try{let n=await o.readOne(t,s);return Promise.resolve({data:n})}catch(n){throw console.log(n),n}},deleteOne:async({resource:e,id:t,metaData:a})=>{let o=r.items(e);try{if(a&&a.softDelete){delete a.softDelete;let s={};return Object.keys(a).length>0?s=i({},a):s={status:"archived"},{data:await o.updateOne(t,s)}}else return{data:await o.deleteOne(t)}}catch(s){throw console.log(s),s}},deleteMany:async({resource:e,ids:t,metaData:a})=>{let o=r.items(e);try{if(a&&a.softDelete){delete a.softDelete;let s={};return Object.keys(a).length>0?s=i({},a):s={status:"archived"},{data:(await o.updateMany(t,s)).data}}else return{data:await o.deleteMany(t)}}catch(s){throw console.log(s),s}},getApiUrl:()=>r.url,custom:async({url:e,method:t,filters:a,sort:o,payload:s,query:n,headers:c})=>{let u=r.transport,l;switch(t){case"put":l=await u.put(e,s,{headers:c,params:n});break;case"post":l=await u.post(e,s,{headers:c,params:n});break;case"patch":l=await u.patch(e,s,{headers:c,params:n});break;case"delete":l=await u.delete(e,{headers:c,params:n});break;default:l=await u.get(e,{headers:c,params:n});break}return console.log(l),O(i({},l),{data:l==null?void 0:l.data})}});p(y,require("@directus/sdk"),module.exports);var D=r=>({login:async({username:e,password:t})=>{try{return(await r.auth.login({email:e,password:t})).access_token}catch(a){throw console.log(a),a}},logout:async()=>{try{return await r.auth.logout()}catch(e){throw console.log(e),e}},checkError:e=>e.status===401?Promise.reject():Promise.resolve(),checkAuth:async()=>{try{if(await r.users.me.read())return Promise.resolve()}catch(e){return console.log(e),Promise.reject(e)}},getPermissions:async()=>{try{let e=await r.permissions.readByQuery();return Promise.resolve(e)}catch(e){return console.log(e),Promise.reject(e)}},getUserIdentity:async()=>{try{return await r.users.me.read()}catch(e){return console.log(e),Promise.reject(e)}}});
//# sourceMappingURL=index.js.map